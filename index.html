<html>
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css" />
    <link rel="stylesheet" href="./assets/main.css" />
</head>

<body>
    <div id="mapid" style="width: 100%; height: 100%;"></div>

    <script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"></script>
    <script src="https://elfalem.github.io/Leaflet.curve/src/leaflet.curve.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.js"></script>

    <script>
        // my code is ugly, it changes a lot
        // and browser doesn't like me :(
        function noCacheScript(src) {
            var node = document.createElement("script");
            node.src = `${src}${src.includes("?")?"&":"?"}âŒš=${(new Date()).getTime()}`;
            document.body.appendChild(node);
        }
        noCacheScript("./assets/theme.js");
        noCacheScript("./assets/logic.js");
        noCacheScript("./assets/misc.js");


        // --
        async function Main() {
            var theme = themes.VietMap;
            var myMap = CreateMap(theme);
            
            var cases = await LoadData();
            var locations = ProcessData(cases);

            RenderDataToMap(cases, locations, myMap, theme);
        }

        window.addEventListener("load", function() {
            Main();
        });
    </script>

</body>

</html>