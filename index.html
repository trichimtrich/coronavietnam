<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css" />
    <link rel="stylesheet" href="./assets/main.css?1" />

    <style>

    </style>
    
</head>

<body>
    <div id="my-container"><div id="mapid"></div></div>
    <div id="my-sidebar">
        <div class="case-container case-new">
            <div class="case-no">NoXX</div>
            <div class="case-info">YY tuá»•i - ðŸ‘©</div>
            <div class="case-location">Khu vá»±c chÆ°a rÃµ</div>
        </div>
        <div class="location-container">
            <div class="location">
                <div class="location-icon"><img src="https://image.flaticon.com/icons/svg/1691/1691655.svg"></div>
                <div class="location-line">Home 1</div>
            </div>
            <div class="location-split"></div>
            <div class="location">
                <div class="location-icon"><img src="https://image.flaticon.com/icons/svg/1691/1691655.svg"></div>
                <div class="location-line">Home 2</div>
            </div><div class="location-split"></div>
            <div class="location">
                <div class="location-icon"><img src="https://image.flaticon.com/icons/svg/1691/1691655.svg"></div>
                <div class="location-line">Home 3</div>
            </div><div class="location-split"></div>
            <div class="location">
                <div class="location-icon"><img src="https://image.flaticon.com/icons/svg/1691/1691655.svg"></div>
                <div class="location-line">Home 4</div>
            </div><div class="location-split"></div>
            <div class="location">
                <div class="location-icon"><img src="https://image.flaticon.com/icons/svg/1691/1691655.svg"></div>
                <div class="location-line">Home 5</div>
            </div><div class="location-split"></div>
        </div>


    </div>


    <script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"></script>
    <script src="https://elfalem.github.io/Leaflet.curve/src/leaflet.curve.js"></script>
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>

    <script>
        // my code is ugly, it changes a lot
        // and browser doesn't like me :(
        function noCacheScript(src) {
            var node = document.createElement("script");
            node.src = `${src}${src.includes("?")?"&":"?"}âŒš=${(new Date()).getTime()}`;
            document.body.appendChild(node);
        }
        noCacheScript("./assets/theme.js");
        noCacheScript("./assets/logic.js");
        noCacheScript("./assets/misc.js");
        noCacheScript("./assets/gui.js");


        // --
        async function Main() {
            var theme = LoadTheme("VietMap");

            var myMap = CreateMap(theme);

            var cases = await LoadData();
            var locations = ProcessData(cases);

            RenderDataToMap(cases, locations, myMap, theme);

            SetEvents(cases, locations, myMap);
        }

        window.addEventListener("load", function() {
            window.sidebar = -1;
            Main();

            // toggleSidebar();
        });
    </script>

</body>

</html>